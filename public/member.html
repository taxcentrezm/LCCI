<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Members | Lusaka Chamber</title>
<script src="https://unpkg.com/feather-icons"></script>
<style>
:root {
  --primary: #0078d7;
  --accent: #ff9800;
  --bg: #f9fafc;
  --text: #333;
  --text-dark: #111;
  --radius: 16px;
  --muted: #6b7280;
}

/* Base */
body {
  margin: 0;
  font-family: 'Open Sans', sans-serif;
  background: var(--bg);
  color: var(--text);
}
h1,h2,h3,h4 { margin: 0; font-weight: 600; }
a { text-decoration: none; }
.muted { color: var(--muted); font-size: 0.9rem; }

/* Modal */
.modal {
  display: none;
  justify-content: center;
  align-items: center;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  z-index: 999;
}
.merged-container {
  width: 95%;
  max-width: 1100px;
  display: grid;
  grid-template-columns: 1.2fr 1.8fr;
  background: #fff;
  border-radius: var(--radius);
  overflow: hidden;
}
@media(max-width:900px){
  .merged-container{grid-template-columns:1fr;max-height:90vh;overflow-y:auto;}
}

/* Left Background */
.left-bg {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  overflow: hidden;
}
.left-bg img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0;
  transition: opacity 1s;
}
.left-bg img.active { opacity: 1; }
.left-overlay {
  position: relative;
  z-index: 2;
  background: rgba(0,0,0,0.45);
  padding: 30px 20px;
  border-radius: var(--radius);
  max-width: 280px;
  text-align: center;
}
.left-overlay h2 { font-size: 1.8rem; margin-bottom: 12px; }
.left-overlay p { font-size: 1rem; }

/* Right Form */
.right-form {
  padding: 40px 35px;
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
}
.close-btn {
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 1.5rem;
  cursor: pointer;
  color: #888;
}
.step-content { display: none; opacity: 0; transform: translateY(20px); transition: all .4s ease; }
.step-content.active { display: block; opacity: 1; transform: none; }
.right-form h3 { text-align: center; color: var(--primary); margin-bottom: 20px; }
form { display: flex; flex-direction: column; gap: 16px; }
input, select {
  padding: 12px 14px;
  border: 1px solid #ccc;
  border-radius: 10px;
  font-size: 1rem;
  width: 100%;
}
input:focus, select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(0,120,215,0.15);
}

/* Actions */
.actions {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  margin-top: 20px;
  flex-wrap: wrap;
}
.btn {
  padding: 12px 24px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s;
}
.btn.secondary { background: var(--primary); color: #fff; }
.btn.secondary:hover { background: #005aad; }
.btn:hover { transform: translateY(-2px); }

/* Chips for sectors */
.chip-container { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }
.chip {
  background: #eef4ff;
  padding: 6px 12px;
  border-radius: 16px;
  font-size: 0.9rem;
  cursor: pointer;
}

/* Suggestions dropdown */
.suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 8px;
  max-height: 180px;
  overflow-y: auto;
  z-index: 1000;
  display: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.suggestions li {
  padding: 10px 14px;
  cursor: pointer;
}
.suggestions li:hover,
.suggestions li.active { background: var(--primary); color: #fff; }

/* Service cards */
.category-cards {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  margin-top: 12px;
}
.service-card {
  flex: 1 1 calc(50% - 16px);
  border: 1px solid #ddd;
  border-radius: var(--radius);
  padding: 16px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
}
.service-card.selected {
  border: 2px solid var(--primary);
  background: #eef4ff;
  box-shadow: 0 6px 18px rgba(0,120,215,0.2);
}
.service-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.12);
}
.service-card h4 { margin-bottom: 6px; }
.service-card p { font-size: 0.9rem; color: var(--muted); }
.service-card span { font-weight: 600; display: block; margin-top: 4px; }

/* Review section */
.review {
  font-size: 0.95rem;
  color: #444;
  line-height: 1.6;
  margin-top: 15px;
}

/* Popup (transaction) */
.popup {
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #fff;
  padding: 28px;
  border-radius: 12px;
  box-shadow: 0 12px 28px rgba(0,0,0,0.25);
  text-align: center;
  width: 80%;
  max-width: 380px;
  z-index: 2000;
}
.popup h3 { margin-bottom: 12px; }
.popup p { margin-bottom: 20px; }

/* Animations */
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
@keyframes fadeInUp { from {opacity:0; transform: translateY(20px);} to {opacity:1; transform:none;} }
</style>


</head>
<body>

<header class="header">
  <div class="header-content">
    <h1>Welcome to Lusaka Chamber</h1>
    <p>Empowering businesses through connection, advocacy, and opportunity.</p>
  </div>
</header>

<div class="card-grid">
  <div class="action-card" onclick="openModal('registerModal')">
    <div class="card-icon"><i data-feather="edit-3"></i></div>
    <h3>Register Company</h3>
    <p>Apply for membership and join Lusaka’s business network.</p>
    <button class="btn">Start Registration</button>
  </div>
  <div class="action-card" onclick="openModal('loginModal')">
    <div class="card-icon"><i data-feather="lock"></i></div>
    <h3>Access Portal</h3>
    <p>Login to manage your membership and access resources.</p>
    <button class="btn btn-outline">Login Now</button>
  </div>
</div>

<!-- Registration Modal -->
<div class="modal" id="registerModal">
  <div class="merged-container">

    <!-- Left Background -->
    <aside class="left-bg">
      <img src="back (1).jpg" class="active"/><img src="side (2).jpg"/><img src="back (3).jpg"/><img src="back.jpg"/>
      <div class="left-overlay">
        <h2>Join Lusaka Chamber</h2>
        <p>Empowering businesses through connection, advocacy, and growth.</p>
      </div>
    </aside>

    <!-- Center Steps -->
    <aside class="center-steps">
      <div class="brand">
        <div class="logo">LC</div>
        <div>
          <h3>Company Membership</h3>
          <div class="muted">5 steps to join</div>
        </div>
      </div>

      <div class="steps">
        <div class="step-item active" data-step="1">
          <div class="step-icon"><i data-feather="map-pin"></i></div>
          <div class="step-labels">
            <div class="title">1. Location</div>
            <div class="subtitle">Country & district</div>
          </div>
        </div>
        <div class="step-item" data-step="2">
          <div class="step-icon"><i data-feather="briefcase"></i></div>
          <div class="step-labels">
            <div class="title">2. Sector & Services</div>
            <div class="subtitle">Select your package</div>
          </div>
        </div>
        <div class="step-item" data-step="3">
          <div class="step-icon"><i data-feather="users"></i></div>
          <div class="step-labels">
            <div class="title">3. Company Persons</div>
            <div class="subtitle">Key contacts</div>
          </div>
        </div>
        <div class="step-item" data-step="4">
          <div class="step-icon"><i data-feather="check-circle"></i></div>
          <div class="step-labels">
            <div class="title">4. Review</div>
            <div class="subtitle">Submit</div>
          </div>
        </div>
      </div>
      <div class="progress-line"><div class="progress-fill" id="progressFill"></div></div>
    </aside>

    <!-- Right Form -->
    <main class="right-form">
      <span class="close-btn" onclick="closeModal('registerModal')">×</span>
      <div class="avatar"><img src="stock.jpg" alt="avatar"></div>

      <!-- Step 1: Location -->
      <section class="step-content active" data-step="1">
        <h3>Company Location</h3>
        <div class="field-row">
          <label for="country">Country (SADC)</label>
          <select id="country">
            <option value="">Select country</option>
            <option value="ZW">Zimbabwe</option>
            <option value="ZA">South Africa</option>
            <option value="BW">Botswana</option>
            <option value="NA">Namibia</option>
            <option value="MZ">Mozambique</option>
            <option value="ZM">Zambia</option>
            <option value="TZ">Tanzania</option>
          </select>
        </div>

        <div class="row">
          <div class="col field-row">
            <label for="district">District / Province</label>
            <select id="district"><option value="">Select district</option></select>
          </div>
          <div class="col field-row">
            <label for="town">Town</label>
            <select id="town"><option value="">Select town</option></select>
          </div>
        </div>

        <div class="actions">
          <div></div>
          <button class="btn secondary" onclick="nextStep(2)">Next →</button>
        </div>
      </section>

      <!-- Step 2: Sector & Service Packages -->
      <section class="step-content" data-step="2">
        <h3>Company Sector & Services</h3>

        <label for="sectorInput">Type and select sectors/services</label>
        <input id="sectorInput" type="text" placeholder="e.g. IT, Manufacturing" oninput="showSectorSuggestions(this.value)" />
        <div class="suggestions" id="sectorSuggestions"></div>
        <div class="chip-container" id="sectorChips" aria-live="polite"></div>

        <h4>Choose Membership Package</h4>
        <div class="category-cards" id="serviceCards">
          <div class="service-card" data-package="Premium" data-fee="500" onclick="selectPackage(this)">
            <h4>Premium Membership</h4>
            <p>Full access to all chamber resources</p>
            <span>Fee: ZMW 500</span>
          </div>
          <div class="service-card" data-package="Standard" data-fee="300" onclick="selectPackage(this)">
            <h4>Standard Membership</h4>
            <p>Basic access</p>
            <span>Fee: ZMW 300</span>
          </div>
        </div>

        <div class="actions">
          <button class="btn" onclick="prevStep(1)">← Back</button>
        </div>
      </section>

      <!-- Step 3: Company Persons -->
      <section class="step-content" data-step="3">
        <h3>Company Persons</h3>
        <input id="personName" placeholder="Full Name" required>
        <input id="designation" placeholder="Designation" list="designationSuggestions">
        <datalist id="designationSuggestions">
          <option>CEO</option>
          <option>Managing Director</option>
          <option>Finance Manager</option>
          <option>Operations Head</option>
        </datalist>

        <div class="actions">
          <button class="btn" onclick="prevStep(2)">← Back</button>
          <button class="btn secondary" onclick="nextStep(4)">Next →</button>
        </div>
      </section>

      <!-- Step 4: Review -->
      <section class="step-content" data-step="4">
        <h3>Review & Submit</h3>
        <div class="review" id="finalReview"></div>

        <div class="actions">
          <button class="btn" onclick="prevStep(3)">← Back</button>
          <button class="btn secondary" onclick="submitApplication()">Submit</button>
        </div>
      </section>

      <!-- Mock Transaction Popup -->
      <div class="popup" id="transactionPopup" style="display:none;">
        <h3>Payment for <span id="selectedPackage"></span></h3>
        <p>Fee: ZMW <span id="selectedFee"></span></p>
        <button class="btn secondary" onclick="completeTransaction()">Pay</button>
      </div>

    </main>
  </div>
</div>

<!-- Login Modal -->
<div class="modal" id="loginModal">
  <div class="modal-content">
    <div class="modal-left">
      <img src="back (2).jpg" class="slide-bg active"/><img src="back.jpg" class="slide-bg"/>
      <div class="modal-text"><h2>Welcome Back</h2><p>Access your member portal and manage your company profile.</p></div>
    </div>
    <div class="modal-right">
      <span class="close-btn" onclick="closeModal('loginModal')">×</span>
      <div class="avatar"><i data-feather="log-in"></i></div>
      <h3>Member Login</h3>
      <form id="loginForm">
        <input type="email" placeholder="Business Email" required>
        <input type="password" placeholder="Password" required>
        <button type="submit" class="btn">Login</button>
      </form>
    </div>
  </div>
</div>

<section><h2>About the Chamber</h2><p>The Lusaka Chamber of Commerce is a non-profit partnership building a stronger economy and community.</p></section>

<script>
feather.replace();

/* Modal controls */
function openModal(id){
  document.getElementById(id).style.display = 'flex';
}
function closeModal(id){
  document.getElementById(id).style.display = 'none';
  const popup = document.getElementById('registerPopup');
  if(popup) popup.style.display = 'none';
  const txn = document.getElementById('transactionModal');
  if(txn) txn.style.display = 'none';
}

/* Slideshows */
const regSlides = document.querySelectorAll('#registerModal .left-bg img');
let r = 0;
if(regSlides.length){
  setInterval(() => {
    regSlides[r].classList.remove('active');
    r = (r + 1) % regSlides.length;
    regSlides[r].classList.add('active');
  }, 6000);
}

/* Stepper logic */
const steps = document.querySelectorAll('.step-item');
const progress = document.getElementById('progressFill');
const stepContents = document.querySelectorAll('.step-content');
let currentStep = 1;

function updateStepper(n){
  steps.forEach((s,i) => s.classList.toggle('active', i < n));
  if(progress) progress.style.width = ((n-1)/(steps.length-1))*100 + '%';
  stepContents.forEach(sc => sc.classList.toggle('active', Number(sc.dataset.step) === n));
  currentStep = n;
  renderReview();
}
function nextStep(n){ updateStepper(n); }
function prevStep(n){ updateStepper(n); }

/* Email validation & business popup */
const popup = document.getElementById('registerPopup');
let emailAttempts = 0;
function isBusinessEmail(email){
  const e = email.trim().toLowerCase();
  const freeDomains = ["gmail.com","yahoo.com","hotmail.com","outlook.com"];
  const domain = e.split("@")[1];
  if(!domain) return false;
  if(freeDomains.includes(domain)) return false;
  return e.includes("@") && domain.includes(".");
}
function validateEmail(){
  const email = document.getElementById('registerEmail').value;
  if(!isBusinessEmail(email)){
    emailAttempts++;
    if(emailAttempts >= 2){
      popup.style.display = 'block';
    } else {
      alert('Please use a business email (e.g. name@company.com)');
    }
    return;
  }
  popup.style.display = 'none';
  nextStep(3);
}

/* Cascading Country / District / Town */
const countryData = {
  'ZW':{name:'Zimbabwe',flag:'🇿🇼',code:'+263'},
  'ZA':{name:'South Africa',flag:'🇿🇦',code:'+27'},
  'BW':{name:'Botswana',flag:'🇧🇼',code:'+267'},
  'NA':{name:'Namibia',flag:'🇳🇦',code:'+264'},
  'MZ':{name:'Mozambique',flag:'🇲🇿',code:'+258'},
  'ZM':{name:'Zambia',flag:'🇿🇲',code:'+260'},
  'TZ':{name:'Tanzania',flag:'🇹🇿',code:'+255'}
};
const districts = {
  'ZW':['Harare','Bulawayo','Manicaland','Mashonaland Central'],
  'ZA':['Gauteng','Western Cape','KwaZulu-Natal'],
  'BW':['Gaborone','Francistown'],
  'NA':['Khomas','Erongo'],
  'MZ':['Maputo','Beira'],
  'ZM':['Lusaka','Ndola'],
  'TZ':['Dar es Salaam','Dodoma']
};
const towns = {
  'Harare':['Harare CBD','Chisipite','Borrowdale'],
  'Bulawayo':['Khami','Nkulumane'],
  'Gauteng':['Johannesburg','Pretoria'],
  'Western Cape':['Cape Town','Stellenbosch'],
  'KwaZulu-Natal':['Durban','Pietermaritzburg'],
  'Maputo':['Maputo City'],
  'Lusaka':['Lusaka Central']
};

const countrySelect = document.getElementById('country');
const districtSelect = document.getElementById('district');
const townSelect = document.getElementById('town');

if(countrySelect){
  countrySelect.addEventListener('change', ()=>{
    const code = countrySelect.value;
    districtSelect.innerHTML = '<option value="">Select district</option>';
    townSelect.innerHTML = '<option value="">Select town</option>';
    if(code && districts[code]) districts[code].forEach(d => {
      districtSelect.insertAdjacentHTML('beforeend', `<option value="${d}">${d}</option>`);
    });
    const cd = countryData[code];
    document.getElementById('flagEmoji').textContent = cd ? cd.flag : '🏳️';
    document.getElementById('countryCode').textContent = cd ? cd.code : '+000';
  });
}

if(districtSelect){
  districtSelect.addEventListener('change', ()=>{
    const val = districtSelect.value;
    townSelect.innerHTML = '<option value="">Select town</option>';
    if(towns[val]) towns[val].forEach(t => {
      townSelect.insertAdjacentHTML('beforeend', `<option value="${t}">${t}</option>`);
    });
  });
}

/* Service cards & mock transaction */
function selectService(card){
  const service = card.querySelector('h4').innerText;
  const fee = card.dataset.fee;
  document.getElementById('selectedService').innerText = service;
  document.getElementById('serviceFee').innerText = fee;
  openModal('transactionModal');
}
function confirmPayment(){
  alert('✅ Payment confirmed! Proceeding to Signature & Confirmation.');
  closeModal('transactionModal');
  nextStep(5);
}

/* Step 5 review rendering */
function renderReview(){
  if(currentStep !== 5) return;
  const area = document.getElementById('finalReview');
  if(!area) return;

  const company = document.getElementById('companyName')?.value || '';
  const incorp = document.getElementById('incorpNo')?.value || '';
  const address = document.getElementById('address')?.value || '';
  const contact = document.getElementById('contactPerson')?.value || '';
  const email = document.getElementById('registerEmail')?.value || '';
  const phone = document.getElementById('phone')?.value || '';
  const fax = document.getElementById('fax')?.value || '';
  const person = document.getElementById('personName')?.value || '';
  const designation = document.getElementById('designation')?.value || '';
  const title = document.getElementById('title')?.value || '';
  const goods = document.getElementById('goodsServices')?.value || '';
  const sector = document.getElementById('sectorInput')?.value || '';
  const service = document.getElementById('selectedService')?.innerText || '';
  const fee = document.getElementById('serviceFee')?.innerText || '';
  const signature = document.getElementById('signature')?.value || '';
  const date = document.getElementById('signDate')?.value || '';

  area.innerHTML = `
    <strong>Company Name:</strong> ${company}<br>
    <strong>Incorporation No:</strong> ${incorp}<br>
    <strong>Address:</strong> ${address}<br>
    <strong>Contact Person:</strong> ${contact}<br>
    <strong>Email:</strong> ${email}<br>
    <strong>Phone:</strong> ${phone}<br>
    <strong>Fax:</strong> ${fax}<br>
    <strong>Person Name:</strong> ${person}<br>
    <strong>Designation:</strong> ${designation}<br>
    <strong>Title:</strong> ${title}<br>
    <strong>Principal Goods/Services:</strong> ${goods}<br>
    <strong>Sector:</strong> ${sector}<br>
    <strong>Selected Service:</strong> ${service}<br>
    <strong>Fee:</strong> ZMW ${fee}<br>
    <strong>Signature:</strong> ${signature}<br>
    <strong>Date:</strong> ${date}
  `;
}

/* Submit registration */
function submitApplication(){
  const data = {
    companyName: document.getElementById('companyName')?.value || '',
    incorpNo: document.getElementById('incorpNo')?.value || '',
    address: document.getElementById('address')?.value || '',
    contactPerson: document.getElementById('contactPerson')?.value || '',
    email: document.getElementById('registerEmail')?.value || '',
    phone: document.getElementById('phone')?.value || '',
    fax: document.getElementById('fax')?.value || '',
    personName: document.getElementById('personName')?.value || '',
    designation: document.getElementById('designation')?.value || '',
    title: document.getElementById('title')?.value || '',
    goodsServices: document.getElementById('goodsServices')?.value || '',
    sector: document.getElementById('sectorInput')?.value || '',
    selectedService: document.getElementById('selectedService')?.innerText || '',
    serviceFee: document.getElementById('serviceFee')?.innerText || '',
    signature: document.getElementById('signature')?.value || '',
    signDate: document.getElementById('signDate')?.value || ''
  };
  console.log('Collected Registration Data:', data);
  alert('✅ Membership application submitted successfully!');
  closeModal('registerModal');
}

/* Login form mock */
const loginForm = document.getElementById('loginForm');
if(loginForm){
  loginForm.addEventListener('submit', e=>{
    e.preventDefault();
    alert('✅ Login successful. Redirecting to your member dashboard...');
    closeModal('loginModal');
  });
}
</script>
</body>
</html>
